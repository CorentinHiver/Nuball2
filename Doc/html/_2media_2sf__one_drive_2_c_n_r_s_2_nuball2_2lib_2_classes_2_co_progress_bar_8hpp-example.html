<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nuball2: /media/sf_OneDrive/CNRS/Nuball2/lib/Classes/CoProgressBar.hpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Nuball2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_2media_2sf__one_drive_2_c_n_r_s_2_nuball2_2lib_2_classes_2_co_progress_bar_8hpp-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/media/sf_OneDrive/CNRS/Nuball2/lib/Classes/CoProgressBar.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>Displays an auto-updating progress</p>
<pre class="fragment">   int i = 0;
   int max = 1000000;
   CoProgressBar prog(&amp;i, max);
   for (;i&lt;max; i++)
   {
     prog.show();
   }
</pre> <dl class="section note"><dt>Note</dt><dd></dd></dl>
<p>The various show methods go back to the beginning of the line at the end in order to update at next iteration. If you wich to display something else in between, please consider adding an extra end-line character (std::endl, '\n') ...</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef COPROGRESSBAR_HPP</span></div>
<div class="line"><span class="preprocessor">#define COPROGRESSBAR_HPP</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;../libCo.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_timer_8hpp.html">Timer.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><span class="keyword">class </span><a name="_a0"></a><a class="code" href="class_co_progress_bar.html">CoProgressBar</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Constructors :</span></div>
<div class="line">  <a name="a1"></a><a class="code" href="class_co_progress_bar.html#a81a2ac9c5cde4b3f528cc1cf207715fc">CoProgressBar</a>() noexcept = <span class="keywordflow">default</span>;</div>
<div class="line">  <a class="code" href="class_co_progress_bar.html#a81a2ac9c5cde4b3f528cc1cf207715fc">CoProgressBar</a>(T * value, <span class="keywordtype">float</span> <span class="keyword">const</span> &amp; value_max) : <a name="a2"></a><a class="code" href="class_co_progress_bar.html#ab54fee7f6cea3e105918836870d9e95e">m_value</a>(value), <a name="a3"></a><a class="code" href="class_co_progress_bar.html#ae22504f867d4a07d27e6fed248cfcbaf">m_value_max</a>(value_max) {}</div>
<div class="line">  <a class="code" href="class_co_progress_bar.html#a81a2ac9c5cde4b3f528cc1cf207715fc">CoProgressBar</a>(T * value, <span class="keywordtype">float</span> <span class="keyword">const</span> &amp; value_max, <span class="keywordtype">int</span> width) : <a class="code" href="class_co_progress_bar.html#ab54fee7f6cea3e105918836870d9e95e">m_value</a>(value), <a class="code" href="class_co_progress_bar.html#ae22504f867d4a07d27e6fed248cfcbaf">m_value_max</a>(value_max), <a name="a4"></a><a class="code" href="class_co_progress_bar.html#a76f13195beb7ba1acce4f94ef511d7c2">m_width</a>(width) {}</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Settings methods :</span></div>
<div class="line">  <span class="keywordtype">bool</span> <a name="a5"></a><a class="code" href="class_co_progress_bar.html#a11bd8143244337b4e97858b176f43008">setValue</a>(T * value) {<span class="keywordflow">return</span> (<a class="code" href="class_co_progress_bar.html#ab54fee7f6cea3e105918836870d9e95e">m_value</a> = value);}</div>
<div class="line">  <span class="keywordtype">bool</span> <a name="a6"></a><a class="code" href="class_co_progress_bar.html#a74e7041d7ecfdb4ce5963ba55c63206b">setValueMax</a>(<span class="keywordtype">float</span> <span class="keyword">const</span> &amp; value_max) {<span class="keywordflow">return</span> (<a class="code" href="class_co_progress_bar.html#ae22504f867d4a07d27e6fed248cfcbaf">m_value_max</a> = value_max);}</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Show methods :</span></div>
<div class="line">  <span class="keywordtype">void</span> <a name="a7"></a><a class="code" href="class_co_progress_bar.html#a79b92711e75250b41c39aeeca73a1621">show</a>(std::string <span class="keyword">const</span> &amp; message = <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">  <span class="keywordtype">void</span> <a name="a8"></a><a class="code" href="class_co_progress_bar.html#a0f79e8a642786af052ee7f1356b4bf9d">showFast</a>();</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">int</span> <a class="code" href="class_co_progress_bar.html#a76f13195beb7ba1acce4f94ef511d7c2">m_width</a> = 50;</div>
<div class="line"> </div>
<div class="line">  T* <a class="code" href="class_co_progress_bar.html#ab54fee7f6cea3e105918836870d9e95e">m_value</a> = <span class="keyword">nullptr</span>;</div>
<div class="line">  T <a class="code" href="class_co_progress_bar.html#ae22504f867d4a07d27e6fed248cfcbaf">m_value_max</a> = 0;</div>
<div class="line">  <span class="keywordtype">int</span> <a name="a9"></a><a class="code" href="class_co_progress_bar.html#a12b03168cd124f1c597a003236748458">m_last_value</a> = 0;</div>
<div class="line"> </div>
<div class="line">  <a name="_a10"></a><a class="code" href="class_timer.html">Timer</a> <a name="a11"></a><a class="code" href="class_co_progress_bar.html#ab2fca97c06433ac5c2805cad130edf3a">timer</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">bool</span> <a name="a12"></a><a class="code" href="class_co_progress_bar.html#ae4588f4445f3e4cb4156d55987b93dc8">first_time</a> = <span class="keyword">true</span>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="class_co_progress_bar.html#a0f79e8a642786af052ee7f1356b4bf9d">CoProgressBar&lt;T&gt;::showFast</a>()</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (!m_value)              <a name="a13"></a><a class="code" href="lib_co_8hpp.html#a6df2dcd4b1f61c75dc292942bc5ca74d">throw_error</a>(<span class="stringliteral">&quot;in CoProgressBar&lt;T&gt;::show() : the value has not been set !!&quot;</span>);</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_value_max == 0) <a class="code" href="lib_co_8hpp.html#a6df2dcd4b1f61c75dc292942bc5ca74d">throw_error</a>(<span class="stringliteral">&quot;in CoProgressBar&lt;T&gt;::show() : the maximum value has not been set !!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> <span class="keyword">const</span> &amp; real_procentage = <a name="a14"></a><a class="code" href="lib_co_8hpp.html#a075a3c229a21ca4d0e91f72e99a6bf6d">float_cast</a>(*m_value)/m_value_max;</div>
<div class="line">  <span class="keyword">auto</span> <span class="keyword">const</span> &amp; nb_chars = <a name="a15"></a><a class="code" href="lib_co_8hpp.html#a48e80fbfd11f9fb219b92ba1c29c1b2a">int_cast</a>(real_procentage*m_width);</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;|&quot;</span>;</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt;m_width; i++) </div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> (i&lt;nb_chars) std::cout &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line">    <span class="keywordflow">else</span>            std::cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">  }</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;| : &quot;</span> &lt;&lt; <a class="code" href="lib_co_8hpp.html#a48e80fbfd11f9fb219b92ba1c29c1b2a">int_cast</a>(real_procentage*100) &lt;&lt; <span class="stringliteral">&quot;% &quot;</span> &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;\033[F&quot;</span>;</div>
<div class="line">  std::cout.flush();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="class_co_progress_bar.html#a79b92711e75250b41c39aeeca73a1621">CoProgressBar&lt;T&gt;::show</a>(std::string <span class="keyword">const</span> &amp; message)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (!m_value)              <a class="code" href="lib_co_8hpp.html#a6df2dcd4b1f61c75dc292942bc5ca74d">throw_error</a>(<span class="stringliteral">&quot;in CoProgressBar&lt;T&gt;::show() : the value has not been set !!&quot;</span>);</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m_value_max == 0) <a class="code" href="lib_co_8hpp.html#a6df2dcd4b1f61c75dc292942bc5ca74d">throw_error</a>(<span class="stringliteral">&quot;in CoProgressBar&lt;T&gt;::show() : the maximum value has not been set !!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">float</span> speed = 0.f;</div>
<div class="line">  <span class="keywordflow">if</span> (first_time) {timer.Restart(); speed = 0; first_time = <span class="keyword">false</span>;}</div>
<div class="line">  <span class="keywordflow">else</span> {speed = 100*((*m_value)-m_last_value)/(timer.TimeSec()*m_value_max);}</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">auto</span> <span class="keyword">const</span> &amp; real_procentage = <a class="code" href="lib_co_8hpp.html#a075a3c229a21ca4d0e91f72e99a6bf6d">float_cast</a>(*m_value)/m_value_max;</div>
<div class="line">  <span class="keyword">auto</span> <span class="keyword">const</span> &amp; nb_chars = <a class="code" href="lib_co_8hpp.html#a48e80fbfd11f9fb219b92ba1c29c1b2a">int_cast</a>(real_procentage*m_width);</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;|&quot;</span>;</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt;m_width; i++) </div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> (i&lt;nb_chars) std::cout &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line">    <span class="keywordflow">else</span>            std::cout &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">  }</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;| : &quot;</span> &lt;&lt; <a class="code" href="lib_co_8hpp.html#a48e80fbfd11f9fb219b92ba1c29c1b2a">int_cast</a>(real_procentage*100) &lt;&lt; <span class="stringliteral">&quot;% (&quot;</span> &lt;&lt; std::setprecision(3) &lt;&lt; speed &lt;&lt; <span class="stringliteral">&quot; %/s)&quot;</span>;</div>
<div class="line">  <span class="keywordflow">if</span> (message!=<span class="stringliteral">&quot;&quot;</span>) std::cout &lt;&lt; message ;</div>
<div class="line">  std::cout &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;\033[F&quot;</span>;<span class="comment">// This code flushes the previous line</span></div>
<div class="line">  std::cout.flush();</div>
<div class="line">  timer.Restart();</div>
<div class="line">  m_last_value = *m_value;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">//COPROGRESSBAR_HPP</span></div>
<div class="ttc" id="a_timer_8hpp_html"><div class="ttname"><a href="_timer_8hpp.html">Timer.hpp</a></div></div>
<div class="ttc" id="aclass_co_progress_bar_html"><div class="ttname"><a href="class_co_progress_bar.html">CoProgressBar</a></div><div class="ttdef"><b>Definition:</b> CoProgressBar.hpp:27</div></div>
<div class="ttc" id="aclass_co_progress_bar_html_a0f79e8a642786af052ee7f1356b4bf9d"><div class="ttname"><a href="class_co_progress_bar.html#a0f79e8a642786af052ee7f1356b4bf9d">CoProgressBar::showFast</a></div><div class="ttdeci">void showFast()</div><div class="ttdef"><b>Definition:</b> CoProgressBar.hpp:57</div></div>
<div class="ttc" id="aclass_co_progress_bar_html_a11bd8143244337b4e97858b176f43008"><div class="ttname"><a href="class_co_progress_bar.html#a11bd8143244337b4e97858b176f43008">CoProgressBar::setValue</a></div><div class="ttdeci">bool setValue(T *value)</div><div class="ttdef"><b>Definition:</b> CoProgressBar.hpp:36</div></div>
<div class="ttc" id="aclass_co_progress_bar_html_a12b03168cd124f1c597a003236748458"><div class="ttname"><a href="class_co_progress_bar.html#a12b03168cd124f1c597a003236748458">CoProgressBar::m_last_value</a></div><div class="ttdeci">int m_last_value</div><div class="ttdef"><b>Definition:</b> CoProgressBar.hpp:49</div></div>
<div class="ttc" id="aclass_co_progress_bar_html_a74e7041d7ecfdb4ce5963ba55c63206b"><div class="ttname"><a href="class_co_progress_bar.html#a74e7041d7ecfdb4ce5963ba55c63206b">CoProgressBar::setValueMax</a></div><div class="ttdeci">bool setValueMax(float const &amp;value_max)</div><div class="ttdef"><b>Definition:</b> CoProgressBar.hpp:37</div></div>
<div class="ttc" id="aclass_co_progress_bar_html_a76f13195beb7ba1acce4f94ef511d7c2"><div class="ttname"><a href="class_co_progress_bar.html#a76f13195beb7ba1acce4f94ef511d7c2">CoProgressBar::m_width</a></div><div class="ttdeci">int m_width</div><div class="ttdef"><b>Definition:</b> CoProgressBar.hpp:45</div></div>
<div class="ttc" id="aclass_co_progress_bar_html_a79b92711e75250b41c39aeeca73a1621"><div class="ttname"><a href="class_co_progress_bar.html#a79b92711e75250b41c39aeeca73a1621">CoProgressBar::show</a></div><div class="ttdeci">void show(std::string const &amp;message=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> CoProgressBar.hpp:76</div></div>
<div class="ttc" id="aclass_co_progress_bar_html_a81a2ac9c5cde4b3f528cc1cf207715fc"><div class="ttname"><a href="class_co_progress_bar.html#a81a2ac9c5cde4b3f528cc1cf207715fc">CoProgressBar::CoProgressBar</a></div><div class="ttdeci">CoProgressBar() noexcept=default</div></div>
<div class="ttc" id="aclass_co_progress_bar_html_ab2fca97c06433ac5c2805cad130edf3a"><div class="ttname"><a href="class_co_progress_bar.html#ab2fca97c06433ac5c2805cad130edf3a">CoProgressBar::timer</a></div><div class="ttdeci">Timer timer</div><div class="ttdef"><b>Definition:</b> CoProgressBar.hpp:51</div></div>
<div class="ttc" id="aclass_co_progress_bar_html_ab54fee7f6cea3e105918836870d9e95e"><div class="ttname"><a href="class_co_progress_bar.html#ab54fee7f6cea3e105918836870d9e95e">CoProgressBar::m_value</a></div><div class="ttdeci">T * m_value</div><div class="ttdef"><b>Definition:</b> CoProgressBar.hpp:47</div></div>
<div class="ttc" id="aclass_co_progress_bar_html_ae22504f867d4a07d27e6fed248cfcbaf"><div class="ttname"><a href="class_co_progress_bar.html#ae22504f867d4a07d27e6fed248cfcbaf">CoProgressBar::m_value_max</a></div><div class="ttdeci">T m_value_max</div><div class="ttdef"><b>Definition:</b> CoProgressBar.hpp:48</div></div>
<div class="ttc" id="aclass_co_progress_bar_html_ae4588f4445f3e4cb4156d55987b93dc8"><div class="ttname"><a href="class_co_progress_bar.html#ae4588f4445f3e4cb4156d55987b93dc8">CoProgressBar::first_time</a></div><div class="ttdeci">bool first_time</div><div class="ttdef"><b>Definition:</b> CoProgressBar.hpp:53</div></div>
<div class="ttc" id="aclass_timer_html"><div class="ttname"><a href="class_timer.html">Timer</a></div><div class="ttdef"><b>Definition:</b> Timer.hpp:11</div></div>
<div class="ttc" id="alib_co_8hpp_html_a075a3c229a21ca4d0e91f72e99a6bf6d"><div class="ttname"><a href="lib_co_8hpp.html#a075a3c229a21ca4d0e91f72e99a6bf6d">float_cast</a></div><div class="ttdeci">float float_cast(T const &amp;t)</div><div class="ttdoc">Casts a number into a float.</div><div class="ttdef"><b>Definition:</b> libCo.hpp:217</div></div>
<div class="ttc" id="alib_co_8hpp_html_a48e80fbfd11f9fb219b92ba1c29c1b2a"><div class="ttname"><a href="lib_co_8hpp.html#a48e80fbfd11f9fb219b92ba1c29c1b2a">int_cast</a></div><div class="ttdeci">int int_cast(T const &amp;t)</div><div class="ttdoc">Casts a number into an int.</div><div class="ttdef"><b>Definition:</b> libCo.hpp:209</div></div>
<div class="ttc" id="alib_co_8hpp_html_a6df2dcd4b1f61c75dc292942bc5ca74d"><div class="ttname"><a href="lib_co_8hpp.html#a6df2dcd4b1f61c75dc292942bc5ca74d">throw_error</a></div><div class="ttdeci">void throw_error(std::string const &amp;message)</div><div class="ttdef"><b>Definition:</b> libCo.hpp:156</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
